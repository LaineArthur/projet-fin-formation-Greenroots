<%- include('partials/header') %> 

<body>
  <main class="is-flex-grow-1 mb-6">
    <section class="section mb-6"> 
      <div class="container has-text-centered">
        <div class="columns is-vcentered mb-4">
          <div class="column"> 
            <h1 class="title-page has-text-centered-mobile has-text-left-tablet has-text-weight-bold">Panier</h1>
          </div>
        </div>
      </div>
    </section>
  
    <% cartItems.forEach((item, index) => { %>
      <div class="content-card is-flex is-justify-content-space-around p-2 mb-6" data-tree-id="<%= item.id %>">
        <img src="../public/images/photos/<%= item.image %>" alt="Photo de <%= item.name %>">
        <div class="is-flex is-flex-direction-column is-flex-wrap-nowrap is-justify-content-space-between">
          <p><span class="has-text-weight-semibold">Nom : </span><%= item.name %></p>
          <p><span class="has-text-weight-semibold">Taille : </span><%= item.size %> m</p>
          <p><span class="has-text-weight-semibold">Prix : </span><span class="item-price"><%= item.price_ttc %></span> €</p>
          <p><span class="has-text-weight-semibold">Sous-total : </span><span class="item-subtotal"><%= item.subtotal.toFixed(2) %></span> € </p>
          <p><span class="has-text-weight-semibold">Quantité : </span>
            <div class="field has-addons"> 
              <p class="control">
                <button type="button" class="button is-primary decrement-btn" data-tree-id="<%= item.id %>">-</button>
              </p>
              <p class="control">
                <input class="input has-text-centered quantity-input" type="number" value="<%= item.quantity %>" min="1" max="1000" data-tree-id="<%= item.id %>" style="width: 60px;">
              </p>
              <p class="control">
                <button type="button" class="button is-primary increment-btn" data-tree-id="<%= item.id %>">+</button>
              </p>
            </div>
          </p>
        </div>
        <ul class="follow-command is-flex is-flex-direction-column is-justify-content-space-between">
          <li>
            <button type="button" class="button is-danger remove-btn" data-tree-id="<%= item.id %>">Supprimer du panier</button>
          </li>
        </ul>
      </div>
    <% }); %>
    
    <div class="total-section has-text-right">
      <p class="text-green"><strong>Total TTC :</strong> <span id="cart-total"><%= total.toFixed(2) %> €</span></p>          
      <button class="button is-custom-green is-large mt-2">Passer au paiement</button>
    </div>
    
  </main>
  <script src="/public/js/quantity.js"></script>
</body>

<%- include('partials/footer') %>